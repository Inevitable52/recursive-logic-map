<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>P.E.R.C.Y â€“ AI (ASI + Vision)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      overflow: hidden;
    }
    #logic-map {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: #0a0a0f;
      overflow: hidden;
    }
    #logic-nodes {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      transform: translate(-50%, -50%) scale(1);
    }

    /* Console */
    .console-line {
      margin: 2px 0;
      font-family: monospace;
      font-size: 12px;
    }
    .console-line.ask {
      color: #d6d8ff;
    }
    .console-line.exec {
      color: #7fff7f;
    }
    #percy-console {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 35%;
      max-height: 40%;
      overflow: auto;
      background: rgba(0, 0, 0, 0.65);
      padding: 6px;
      border-top-right-radius: 12px;
      border: 1px solid #444;
    }
    #percy-message {
      position: fixed;
      bottom: 0;
      left: 35%;
      width: 65%;
      padding: 6px;
      background: rgba(0, 0, 0, 0.65);
      border-top-left-radius: 12px;
      border: 1px solid #444;
    }

    /* Buttons & Inputs */
    #askPercyButton,
    #percy-exec-run {
      padding: 6px 12px;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      z-index: 9999;
    }
    #askPercyButton {
      position: fixed;
      top: 12px;
      left: 530px;
      background: #1a1aff;
    }
    #askPercyButton:hover {
      background: #3333ff;
    }
    #percy-exec-run {
      position: fixed;
      top: 90px;
      left: 530px;
      background: #1aff55;
    }
    #percy-exec-run:hover {
      background: #33ff77;
    }
    #interpreter-input,
    #percy-exec-input,
    #seed-search {
      position: fixed;
      padding: 6px;
      z-index: 9999;
      width: 300px;
    }
    #seed-search {
      top: 12px;
      left: 12px;
      width: 200px;
    }
    #interpreter-input {
      top: 12px;
      left: 220px;
    }
    #percy-exec-input {
      top: 90px;
      left: 220px;
      width: 300px;
    }

    #exec-toggle {
      position: fixed;
      top: 50px;
      left: 220px;
      z-index: 9999;
    }
    #exec-toggle button {
      padding: 4px 12px;
      margin-right: 6px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #333;
      color: white;
    }
    #exec-toggle button.active {
      background: #1aff55;
      color: black;
    }

    /* Chat */
    #percy-chat-box {
      position: fixed;
      bottom: 50px;
      right: 12px;
      width: 320px;
      height: 400px;
      background: rgba(0, 0, 0, 0.75);
      border: 1px solid #333;
      border-radius: 12px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      font-family: monospace;
      z-index: 9999;
    }
    #percy-chat-messages {
      flex: 1;
      padding: 8px;
      overflow-y: auto;
    }
    #percy-chat-input {
      flex: 1;
      padding: 6px;
      border: none;
      background: #111;
      color: white;
    }
    #percy-chat-send {
      padding: 6px 10px;
      background: #1aff55;
      color: black;
      border: none;
      cursor: pointer;
    }

    /* Voice Visualizer */
    #voice-visualizer {
      position: fixed;
      top: 12px;
      right: 12px;
      width: 360px;
      height: 128px;
      pointer-events: none;
      display: flex;
      align-items: center;
      border-radius: 12px;
      background: linear-gradient(
        180deg,
        rgba(7, 7, 12, 0.6),
        rgba(7, 7, 12, 0.35)
      );
      box-shadow: 0 6px 24px rgba(0, 255, 255, 0.08),
        inset 0 1px 0 rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(0, 255, 255, 0.1);
      z-index: 9999;
    }
    #voice-canvas {
      flex: 1;
      width: 100%;
      height: 100%;
      border-radius: 8px;
      background: linear-gradient(
        180deg,
        rgba(0, 0, 0, 0.1),
        rgba(0, 0, 0, 0.05)
      );
    }

    /* Camera */
    #camera-feed {
      position: fixed;
      top: 150px;
      right: 12px;
      width: 320px;
      height: 240px;
      border: 1px solid #333;
      border-radius: 12px;
      z-index: 9999;
      object-fit: cover;
      background: #000;
    }
    #camera-overlay {
      position: fixed;
      top: 150px;
      right: 12px;
      width: 320px;
      height: 240px;
      pointer-events: none;
      z-index: 10000;
    }
  </style>
</head>

<body>
  <div id="logic-map"><div id="logic-nodes"></div></div>
  <div id="percy-console"></div>
  <div id="percy-message"></div>

  <input id="seed-search" placeholder="Search seeds" />
  <input id="interpreter-input" placeholder="Ask Percy" />
  <button id="askPercyButton">Run</button>

  <div id="exec-toggle">
    <button data-mode="math" class="active">Math</button>
    <button data-mode="java">Java</button>
    <button data-mode="tools">Tools</button>
  </div>

  <textarea
    id="percy-exec-input"
    placeholder="Percy Exec (Math/Java/Tools)"
    rows="4"
  ></textarea>
  <button id="percy-exec-run">Run Exec</button>

  <!-- Camera + overlay -->
  <video id="camera-feed" autoplay muted playsinline></video>
  <canvas id="camera-overlay"></canvas>

  <!-- Voice visualizer -->
  <div id="voice-visualizer"><canvas id="voice-canvas"></canvas></div>

  <!-- Chat -->
  <div id="percy-chat-box">
    <div id="percy-chat-messages"></div>
    <div style="display: flex; border-top: 1px solid #333;">
      <input id="percy-chat-input" type="text" placeholder="Talk to Percy..." />
      <button id="percy-chat-send">Send</button>
    </div>
  </div>

  <!-- TensorFlow + Models -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.9.0/dist/tf.min.js"></script>
  <script>
    window.tf = window.tf || tf;
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface@0.0.9/dist/blazeface.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.2/dist/coco-ssd.min.js"></script>

  <!-- Percy Core -->
  <script src="js/percy.js?v=6.4"></script>

  <!-- Percy Vision + ASI Integration -->
  <script src="js/percy-asi.js?v=1.0"></script>
</body>
</html>
